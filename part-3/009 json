json keys must be strings -> but python dictionary keys just have to be hashable
                          -> how to serialize?
                          
json value types are limited -> but python dictionary values can be any data type
                             -> how to serialize?
                             
even if we can serialize a complex data type, such as custom class
                             -> how to deserialize back to original data type?    
                             
customize serialization and deserialization


def custom_json_formatter(arg):
  if isinstance(arg,datetime):
    return arg.isoformat()
  elif isinstance(arg,set):
    return list(arg)
  else:
    try:
      return arg.toJson()
    except AttributeError:
      try:
        return vars(arg)
      except TypeError:
        return str(arg)

from decimal import Decimal

pt1 = Point(1,2)
p = Person('John',18)
pt2 = Point(Decimal('10.5'),Decimal(100.5))

log_record = dict(time=datetime.utcnow(),
                  message='Created new point',
                  point = pt1,
                  point_2 = pt2,
                  created_by = p
                  )

json.dumps(long_record, default=custom_json_formatter)
